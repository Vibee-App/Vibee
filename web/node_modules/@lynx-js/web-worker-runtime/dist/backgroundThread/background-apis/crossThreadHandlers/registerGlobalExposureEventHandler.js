// Copyright 2023 The Lynx Authors. All rights reserved.
// Licensed under the Apache License Version 2.0 that can be found in the
// LICENSE file in the root directory of this source tree.
import { postExposureEndpoint, } from '@lynx-js/web-constants';
export function registerGlobalExposureEventHandler(rpc, tt) {
    rpc.registerHandler(postExposureEndpoint, ({ exposures, disExposures }) => {
        if (exposures.length > 0) {
            tt.GlobalEventEmitter.emit('exposure', [
                exposures.map(e => Object.assign(e, e.detail, { dataset: e.target.dataset })),
            ]);
        }
        if (disExposures.length > 0) {
            tt.GlobalEventEmitter.emit('disexposure', [
                disExposures.map(e => Object.assign(e, e.detail, { dataset: e.target.dataset })),
            ]);
        }
    });
}
//# sourceMappingURL=registerGlobalExposureEventHandler.js.map